/* 
 * Imakefile for the FX (file exchange) server
 *
 * $Author: ghudson $
 * $Id: Imakefile,v 1.4 1997-11-14 22:26:16 ghudson Exp $
 *
 *
 * Copyright 1989, 1990 by the Massachusetts Institute of Technology.
 *
 * For copying and distribution information, please see the file
 * <mit-copyright.h>.
 *
 */

/**/# Client-server protocol, error tables kept in separate directories
PROTDIR=../protocol
ETSDIR=../ets

INCLUDES = -I../include

KRBLIBS = -lkrb4 -ldes425 -lkrb5 -lcrypto
/**/#HESLIBS = -lhesiod

LDDEFS = -L../lib
LIBS = -lacl ${KRBLIBS} -lcom_err ${HESLIBS}

/**/# Define KERBEROS for Kerberos support
DEFKRB = -DKERBEROS

/**/# Define HESIOD for Hesiod support
/**/#DEFHES = -DHESIOD

/**/# Define MULTI for multiple server support
DEFMULTI = -DMULTI

/**/# Define DEBUG for command debugging messages
/**/# Define DEBUGDB for db debugging messages
/**/# Define DEBUGMULTI for debugging multiple server support
/**/# Define MALLOC_LEAK for malloc scribble checking and function tracing
/**/#DEFDEBUG = -DDEBUG -DDEBUGDB

DEFINES= ${INCLUDES} ${DEFKRB} ${DEFHES} ${DEFMULTI} ${DEFDEBUG}

#if !defined(_IBMR2)
MALLOCSRC = malloc.c
MALLOCOBJ = malloc.o
#endif

FXSRVOBJS = \
	${ETSDIR}/fxserver_err.o \
	${PROTDIR}/fx_prot_clnt.o \
	${PROTDIR}/fx_prot_svc.o \
	${PROTDIR}/fx_prot_xdr.o \
	db.o \
	commands.o \
	main.o ${MALLOCOBJ} \
	multi.o \
	util.o

FXSRVSRCS = \
	${ETSDIR}/fxserver_err.c \
	${PROTDIR}/local_prot_clnt.c \
	${PROTDIR}/fx_prot_svc.c \
	${PROTDIR}/fx_prot_xdr.c \
	db.c \
	commands.c \
	main.c ${MALLOCSRC} \
	multi.c \
	util.c

SimpleProgram(fxserver,${FXSRVOBJS},${LIBS},$(ATHETCDIR))

saber_src:
	/**/#suppress 223
	/**/#suppress 287
	/**/#load ${INCLUDES} ${DEFKRB} ${DEFHES} ${DEFMULTI} -DDEBUG -DDEBUGMULTI -DDEBUGDB ${FXSRVSRCS} ${LIBS}

lint::
	lint -u ${CFLAGS} ${FXSRVSRCS}
